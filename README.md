# DFC transceiver


## How to build the FX3 firmware image

Firsts install the latest version of Cypress/Infineon FX3 SDK (1.3.5 at this time)
Then build the firmware:
```
cd fx3-firmware
make
```


## How to build the streaming client for Linux

```
cd streaming-client-linux
mkdir build
cd build
cmake ..
make
cd ..
```


## How to build the streaming client for Windows

Firsts install the latest version of Visual Studio with C++ support and Cypress CyUSB drivers.
Then build the streaming client:
```
cd streaming-client-windows
mkdir build
cd build
cmake -G "Visual Studio 17 2022" -A x64 ..
cmake --build . --config Release
cd ..
```
Detailed notes for Windows are in this [README](streaming-client-windows/README.md)


## How to build the signal generator for Linux

```
cd signal-generator-linux
mkdir build
cd build
cmake ..
make
cd ..
```


## How to build the signal generator for Windows

Firsts install the latest version of Visual Studio with C++ support.
Then build the signal generator:
```
cd signal-generator-windows
mkdir build
cd build
cmake -G "Visual Studio 17 2022" -A x64 ..
cmake --build . --config Release
cd ..
```
Detailed notes for Windows are in this [README](signal-generator-windows/README.md)


## How to stream samples from the DFC transceiver (RX mode)

Stream (RX) from the DFC transceiver for 20 seconds in single ADC mode (default sample rate=32MHz):
```
./streaming-client -f fx3-firmware.img -m SINGLE-ADC -t 20
```

Stream (RX) from the DFC transceiver for 20 seconds in single ADC mode (sample rate=100MHz):
```
./streaming-client -f fx3-firmware.img -m SINGLE-ADC -s 100e6 -t 20
```

Stream (RX) from the DFC transceiver for 20 seconds in dual ADC mode (default sample rate=32MHz):
```
./streaming-client -f fx3-firmware.img -m DUAL-ADC -t 20
```

Stream (RX) from the DFC transceiver for 20 seconds in dual ADC mode (sample rate=100MHz):
```
./streaming-client -f fx3-firmware.img -m DUAL-ADC -s 100e6 -t 20
```


## How to stream samples to the DFC transceiver (TX mode)

Stream (TX) a sine wave at 1/100 the sample rate with an amplitude of 1000 to the DFC transceiver for 20 seconds using the clock generated by the Si5351:
```
./signal-generator -s 1/100,1000 | ./streaming-client -f fx3-firmware.img -m DAC -t 20 -i -
```

Stream (TX) a square wave at 1/100 the sample rate with an amplitude of 1500 (i.e. toggling between +1500 and -1500) to the DFC transceiver for 20 seconds using the clock generated by the Si5351:
```
./signal-generator -q 1/100,1500 | ./streaming-client -f fx3-firmware.img -m DAC -t 20 -i -
```

Stream (TX) a triangular wave at 1/100 the sample rate with an amplitude of 2000 to the DFC transceiver:
```
./signal-generator -q 1/100,2000 | ./streaming-client -f fx3-firmware.img -m DAC -t 20 -i -

Stream (TX) a frequency sweep with a frequency of 1/1000 the sample rate with an amplitude of 3000 going from a frequency of 1/20 of the sample rate to 1/4 of the sample rate:
```
./signal-generator -w 1/1000,3000,1/20,1/4 | ./streaming-client -f fx3-firmware.img -m DAC -t 20 -i -

Stream (TX) two tones, the first one at 1/20 the sample rate with an amplitude of 2000 and the second one at 1/50 the sample rate with an amplitude of 500:
```
./signal-generator -s 1/20,2000 -s 1/50,500 | ./streaming-client -f fx3-firmware.img -m DAC -t 20 -i -


```
For TX mode on Windows, you first have to create a file on disk with all the samples to be stream and then run a command like these:
```
build\Release\streaming-client.exe -f fx3-firmware.img -m DAC -t 20 -i samples.dat
build\Release\streaming-client.exe -f fx3-firmware.img -m DAC-FX3-CLOCK -t 20 -i samples.dat
```


## License

Licensed under the GNU GPL V3 (see [LICENSE](LICENSE))
